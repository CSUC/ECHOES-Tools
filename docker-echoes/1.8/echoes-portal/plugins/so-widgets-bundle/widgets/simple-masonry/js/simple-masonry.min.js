var sowb=window.sowb||{};jQuery(function(m){sowb.setupSimpleMasonries=function(){var t=m(".sow-masonry-grid");if(!t.is(":visible")||t.data("initialized"))return t;var i=function(){t.each(function(){var t=m(this),i=t.data("layouts"),a=window.matchMedia("(max-width: "+i.tablet.breakPoint+"px)"),e=window.matchMedia("(max-width: "+i.mobile.breakPoint+"px)"),d=i.desktop;e.matches?d=i.mobile:a.matches&&(d=i.tablet);var s=d.numColumns;t.css("width","auto");var o=d.gutter*(s-1),w=(t.width()-o)/s;t.width(w*s+o),t.imagesLoaded(function(){t.find("> .sow-masonry-grid-item").each(function(){var t=m(this),i=t.data("colSpan");i=Math.max(Math.min(i,d.numColumns),1),t.width(w*i+d.gutter*(i-1));var a=t.data("rowSpan");a=Math.max(Math.min(a,d.numColumns),1);var e=d.rowHeight||w;t.css("height",e*a+d.gutter*(a-1));var s=t.find("> img,> a > img"),o=0<s.attr("height")?s.attr("width")/s.attr("height"):1,n=0<t.height()?t.width()/t.height():1;if(o=parseFloat(o.toFixed(3)),(n=parseFloat(n.toFixed(3)))<o){s.css("width","auto"),s.css("height","100%"),s.css("margin-top","");var r=-.5*(s.width()-t.width());s.css("margin-left",r+"px")}else{s.css("height","auto"),s.css("width","100%"),s.css("margin-left","");var h=-.5*(s.height()-t.height());s.css("margin-top",h+"px")}}),t.packery({itemSelector:".sow-masonry-grid-item",columnWidth:w,gutter:d.gutter})})})};m(window).on("resize panelsStretchRows",i),setTimeout(function(){i()},100),t.data("initialized",!0)},sowb.setupSimpleMasonries(),m(sowb).on("setup_widgets",sowb.setupSimpleMasonries)}),window.sowb=sowb;